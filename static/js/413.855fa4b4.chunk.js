"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[413],{413:function(t,e,n){n.r(e),n.d(e,{default:function(){return y}});var r=n(433),a=n(861),s=n(439),i=n(757),c=n.n(i),u=n(791),o="ShopList_shopList__JXBkC",p="ShopList_shopLink__+yNJW",l=n(184),d=function(t){var e=t.shops,n=t.onSelectShop;return(0,l.jsx)("ul",{className:o,children:e.map((function(t){return(0,l.jsx)("li",{children:(0,l.jsx)("button",{onClick:function(){return e=t.id,void n(e);var e},className:p,children:t.name})},t.id)}))})},h=n(683),f="DrugList_drugList__UQtwR",m="DrugList_drugItem__r0ePb",v="DrugList_drugImg__j6ycj",_="DrugList_wrapper__mSucQ",g="DrugList_drugTitle__zjpJ-",x="DrugList_btnAddToCart__vNPd9",j=function(t){var e=t.drugs,n=t.onAddToCart,a=JSON.parse(localStorage.getItem("cart"))||[],i=(0,u.useState)(a),c=(0,s.Z)(i,2),o=c[0],p=c[1],d=function(t){return o.some((function(e){return e.id===t}))};return(0,u.useEffect)((function(){localStorage.setItem("cart",JSON.stringify(o))}),[o]),(0,l.jsx)("ul",{className:f,children:Array.isArray(e)&&e.length>0&&e.map((function(t){var e=t.id,a=t.poster_path,s=t.name,i=t.price;return(0,l.jsxs)("li",{className:m,children:[(0,l.jsx)("img",{src:a?"".concat("http://").concat(a):"https://img.freepik.com/premium-vector/default-image-icon-vector-missing-picture-page-website-design-mobile-app-no-photo-available_87543-11093.jpg",alt:s,className:v}),(0,l.jsxs)("div",{className:_,children:[(0,l.jsx)("p",{className:g,children:s}),(0,l.jsx)("button",{type:"button",onClick:function(){return t={id:e,name:s,price:i},void(o.some((function(e){return e.id===t.id}))?(p((function(e){return e.filter((function(e){return e.id!==t.id}))})),n((0,h.Z)((0,h.Z)({},t),{},{amount:-1}))):(p((function(e){return[].concat((0,r.Z)(e),[(0,h.Z)((0,h.Z)({},t),{},{amount:1})])})),n((0,h.Z)((0,h.Z)({},t),{},{amount:1}))));var t},className:x,children:d(e)?"Remove from Cart":"Add to Cart"})]})]},e)}))})},w=n(154),S="Loader_loader__+lRPl",Z=function(){return(0,l.jsx)("div",{className:S,children:(0,l.jsx)(w._P,{visible:!0,height:"100",width:"100",color:"#4fa94d",ariaLabel:"rings-loading",wrapperStyle:{},wrapperClass:""})})},b=n(390),k={shopContainer:"Shop_shopContainer__qnJj5",shopTitle:"Shop_shopTitle__18szw"};function y(){var t=(0,u.useState)([]),e=(0,s.Z)(t,2),n=e[0],i=e[1],o=(0,u.useState)([]),p=(0,s.Z)(o,2),h=p[0],f=p[1],m=(0,u.useState)(null),v=(0,s.Z)(m,2),_=v[0],g=v[1],x=(0,u.useState)(!1),w=(0,s.Z)(x,2),S=w[0],y=w[1],N=(0,u.useState)(null),C=(0,s.Z)(N,2),L=C[0],A=C[1],T=(0,u.useState)([]),D=(0,s.Z)(T,2),J=(D[0],D[1]);(0,u.useEffect)((function(){function t(){return(t=(0,a.Z)(c().mark((function t(){var e,n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(!0),t.next=4,b.u6();case 4:e=t.sent,i(e),!_&&e.length>0&&g(null===(n=e[0])||void 0===n?void 0:n.id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),A(t.t0);case 12:return t.prev=12,y(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[_]),(0,u.useEffect)((function(){function t(){return(t=(0,a.Z)(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(!0),t.next=4,b.An(_);case 4:e=t.sent,f(e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),A(t.t0);case 11:return t.prev=11,y(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))).apply(this,arguments)}_&&function(){t.apply(this,arguments)}()}),[_]);return S?(0,l.jsx)(Z,{}):L?(0,l.jsxs)("div",{children:[(0,l.jsxs)("b",{children:[":","("]})," Something went wrong"," "]}):(0,l.jsxs)("div",{className:"container",style:{display:"flex",flexDirection:"row",gap:"40px",paddingTop:"50px"},children:[(0,l.jsxs)("div",{className:k.shopContainer,children:[(0,l.jsx)("h3",{className:k.shopTitle,children:"Shops:"}),(0,l.jsx)(d,{shops:n,onSelectShop:function(t){g(t)}})]}),_&&(0,l.jsx)("div",{className:k.drugsContainer,children:(0,l.jsx)(j,{drugs:h,onAddToCart:function(t){J((function(e){return[].concat((0,r.Z)(e),[t])}))}})})]})}},390:function(t,e,n){n.d(e,{An:function(){return u},me:function(){return p},u6:function(){return c}});var r=n(861),a=n(757),s=n.n(a),i=n(294),c=function(){var t=(0,r.Z)(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.Z.get("/public/data/shops.json");case 3:return e=t.sent,t.abrupt("return",e.data);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();function u(t){return o.apply(this,arguments)}function o(){return(o=(0,r.Z)(s().mark((function t(e){var n,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.Z.get("/data/drugs.json");case 3:return n=t.sent,r=n.data.filter((function(t){return t.shopId===e})),t.abrupt("return",r);case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function p(){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,localStorage.getItem("cart");case 3:return e=t.sent,t.abrupt("return",e?JSON.parse(e):[]);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}}}]);
//# sourceMappingURL=413.855fa4b4.chunk.js.map